// KrushiLink Multi-language Translation System
// Supports: English, Hindi, Marathi

const translations = {
  en: {
    // Navigation & Header
    nav: {
      home: "Home",
      about: "About",
      store: "Store",
      contact: "Contact",
      language: "Language",
      login: "Login",
      register: "Register",
      logout: "Logout",
      welcome: "Welcome"
    },
    
    // Homepage
    homepage: {
      hero_title: "Connecting Farmers to Resources",
      hero_subtitle: "Trusted agro-stores, government schemes, and tools at your fingertips.",
      browse_stores: "Browse Stores",
      about_title: "About KrushiLink",
      about_text: "KrushiLink helps farmers across Maharashtra access trusted agro-stores, government schemes, and essential agricultural resources. Our platform empowers farmers to make informed decisions and improve productivity.",
      read_more: "Read More",
      why_title: "Why Choose KrushiLink?",
      trusted_stores: "Trusted Stores",
      trusted_stores_desc: "Verified agro-stores providing quality products for all types of farming needs.",
      gov_schemes: "Government Schemes",
      gov_schemes_desc: "Access the latest government agricultural schemes and subsidies easily.",
      farmer_support: "Farmer Support",
      farmer_support_desc: "Dedicated support and resources to help farmers increase productivity and profits.",
      services_title: "Our Services",
      services_subtitle: "Connecting farmers with everything they need to succeed.",
      agro_stores: "Agro Stores",
      agro_stores_desc: "Find nearby verified stores for seeds, tools, and equipment.",
      seeds_fertilizers: "Seeds & Fertilizers",
      seeds_fertilizers_desc: "Access high-quality seeds and fertilizers suited for your crops.",
      equipment: "Equipment",
      equipment_desc: "Modern farming equipment and technology solutions.",
      consultation: "Consultation",
      consultation_desc: "Expert advice and guidance for better farming practices."
    },
    
    // Store Page
    store: {
      title: "Agricultural Stores Directory",
      subtitle: "Find trusted agro-stores and government schemes near you",
      filter_district: "Filter by District",
      filter_type: "Store Type",
      filter_resource: "Resources",
      search_placeholder: "Search stores by name or services...",
      clear_filters: "Clear All Filters",
      all_districts: "All Districts",
      all_types: "All Types",
      all_resources: "All Resources",
      government: "Government",
      private: "Private",
      results_showing: "Showing",
      results_of: "of",
      results_stores: "stores",
      no_results: "No stores found",
      no_results_desc: "Try adjusting your filters or search terms",
      govt_store: "Government Store",
      private_store: "Private Store",
      verified: "Verified",
      schemes_available: "Schemes Available",
      available_here: "Available here:",
      and_more: "and {count} more",
      no_ratings: "No ratings yet",
      view_details: "View Details",
      add_review: "Add Review",
      rating: "Rating",
      contact_info: "Contact Information",
      services_offered: "Services Offered",
      schemes_title: "Government Schemes Available",
      subsidy: "Subsidy",
      free_service: "Free Service",
      customer_reviews: "Customer Reviews",
      no_reviews: "No reviews yet. Be the first to review this store!"
    },
    
    // Comments & Reviews
    comments: {
      add_comment: "Add Your Review",
      select_rating: "Select Rating",
      excellent: "Excellent",
      good: "Good",
      average: "Average",
      poor: "Poor",
      terrible: "Terrible",
      your_comment: "Your Comment",
      comment_placeholder: "Share your experience with this store...",
      cancel: "Cancel",
      submit_comment: "Submit Comment",
      login_required: "Please login to add a comment",
      comment_added: "Comment added successfully!",
      comment_deleted: "Comment deleted successfully!",
      delete_confirm: "Are you sure you want to delete this comment?",
      fill_all_fields: "Please fill in all fields"
    },
    
    // Login Page
    login: {
      title: "Login to KrushiLink",
      subtitle: "Access your account to connect with agricultural resources",
      email: "Email Address",
      password: "Password",
      login_button: "Login",
      forgot_password: "Forgot Password?",
      no_account: "Don't have an account?",
      register_here: "Register here",
      email_placeholder: "Enter your email",
      password_placeholder: "Enter your password"
    },
    
    // Register Page
    register: {
      title: "Join KrushiLink",
      subtitle: "Create your account to access agricultural resources and stores",
      full_name: "Full Name",
      email: "Email Address",
      password: "Password",
      confirm_password: "Confirm Password",
      register_button: "Create Account",
      have_account: "Already have an account?",
      login_here: "Login here",
      name_placeholder: "Enter your full name",
      email_placeholder: "Enter your email",
      password_placeholder: "Create a password",
      confirm_placeholder: "Confirm your password"
    },
    
    // About Page
    about: {
      title: "About KrushiLink",
      subtitle: "Empowering farmers across Maharashtra",
      mission_title: "Our Mission",
      mission_text: "To bridge the gap between farmers and agricultural resources by providing a comprehensive platform that connects them with trusted stores, government schemes, and essential farming tools.",
      vision_title: "Our Vision",
      vision_text: "To create a digitally empowered agricultural ecosystem in Maharashtra where every farmer has easy access to quality resources and government support.",
      features_title: "Key Features"
    },
    
    // Contact Page
    contact: {
      title: "Contact Us",
      subtitle: "Get in touch with our team",
      get_in_touch: "Get in Touch",
      contact_text: "Have questions or need assistance? We're here to help farmers across Maharashtra.",
      name: "Your Name",
      email: "Email Address",
      subject: "Subject",
      message: "Message",
      send_message: "Send Message",
      contact_info: "Contact Information",
      address: "Address",
      phone: "Phone",
      email_label: "Email"
    },
    
    // Footer
    footer: {
      description: "Connecting farmers with resources, trusted stores, and government schemes across Maharashtra.",
      quick_links: "Quick Links",
      rights_reserved: "All Rights Reserved"
    },
    
    // Common
    common: {
      loading: "Loading...",
      error: "Error",
      success: "Success",
      warning: "Warning",
      info: "Information",
      close: "Close",
      save: "Save",
      edit: "Edit",
      delete: "Delete",
      search: "Search",
      filter: "Filter",
      sort: "Sort",
      next: "Next",
      previous: "Previous"
    }
  },
  
  hi: {
    // Navigation & Header
    nav: {
      home: "होम",
      about: "हमारे बारे में",
      store: "स्टोर",
      contact: "संपर्क",
      language: "भाषा",
      login: "लॉगिन",
      register: "रजिस्टर",
      logout: "लॉगआउट",
      welcome: "स्वागत"
    },
    
    // Homepage
    homepage: {
      hero_title: "किसानों को संसाधनों से जोड़ना",
      hero_subtitle: "विश्वसनीय कृषि स्टोर, सरकारी योजनाएं और उपकरण आपकी पहुंच में।",
      browse_stores: "स्टोर ब्राउज़ करें",
      about_title: "कृषिलिंक के बारे में",
      about_text: "कृषिलिंक महाराष्ट्र के किसानों को विश्वसनीय कृषि स्टोर, सरकारी योजनाओं और आवश्यक कृषि संसाधनों तक पहुंचने में मदद करता है। हमारा प्लेटफॉर्म किसानों को सूचित निर्णय लेने और उत्पादकता बढ़ाने के लिए सशक्त बनाता है।",
      read_more: "और पढ़ें",
      why_title: "कृषिलिंक क्यों चुनें?",
      trusted_stores: "विश्वसनीय स्टोर",
      trusted_stores_desc: "सभी प्रकार की खेती की जरूरतों के लिए गुणवत्तापूर्ण उत्पाद प्रदान करने वाले सत्यापित कृषि स्टोर।",
      gov_schemes: "सरकारी योजनाएं",
      gov_schemes_desc: "नवीनतम सरकारी कृषि योजनाओं और सब्सिडी तक आसानी से पहुंच।",
      farmer_support: "किसान सहायता",
      farmer_support_desc: "किसानों की उत्पादकता और मुनाफा बढ़ाने के लिए समर्पित सहायता और संसाधन।",
      services_title: "हमारी सेवाएं",
      services_subtitle: "किसानों को सफल होने के लिए आवश्यक सब कुछ प्रदान करना।",
      agro_stores: "कृषि स्टोर",
      agro_stores_desc: "बीज, उपकरण और उपकरणों के लिए निकटवर्ती सत्यापित स्टोर खोजें।",
      seeds_fertilizers: "बीज और उर्वरक",
      seeds_fertilizers_desc: "आपकी फसलों के लिए उपयुक्त उच्च गुणवत्ता वाले बीज और उर्वरक तक पहुंच।",
      equipment: "उपकरण",
      equipment_desc: "आधुनिक कृषि उपकरण और प्रौद्योगिकी समाधान।",
      consultation: "परामर्श",
      consultation_desc: "बेहतर कृषि प्रथाओं के लिए विशेषज्ञ सलाह और मार्गदर्शन।"
    },
    
    // Store Page
    store: {
      title: "कृषि स्टोर निर्देशिका",
      subtitle: "अपने निकट विश्वसनीय कृषि स्टोर और सरकारी योजनाएं खोजें",
      filter_district: "जिले के अनुसार फ़िल्टर करें",
      filter_type: "स्टोर प्रकार",
      filter_resource: "संसाधन",
      search_placeholder: "नाम या सेवाओं के अनुसार स्टोर खोजें...",
      clear_filters: "सभी फ़िल्टर साफ़ करें",
      all_districts: "सभी जिले",
      all_types: "सभी प्रकार",
      all_resources: "सभी संसाधन",
      government: "सरकारी",
      private: "निजी",
      results_showing: "दिखाया जा रहा",
      results_of: "में से",
      results_stores: "स्टोर",
      no_results: "कोई स्टोर नहीं मिला",
      no_results_desc: "अपने फ़िल्टर या खोज शब्दों को समायोजित करने का प्रयास करें",
      govt_store: "सरकारी स्टोर",
      private_store: "निजी स्टोर",
      verified: "सत्यापित",
      schemes_available: "योजनाएं उपलब्ध",
      available_here: "यहाँ उपलब्ध:",
      and_more: "और {count} और",
      no_ratings: "अभी तक कोई रेटिंग नहीं",
      view_details: "विवरण देखें",
      add_review: "समीक्षा जोड़ें",
      rating: "रेटिंग",
      contact_info: "संपर्क जानकारी",
      services_offered: "प्रदान की जाने वाली सेवाएं",
      schemes_title: "उपलब्ध सरकारी योजनाएं",
      subsidy: "सब्सिडी",
      free_service: "निःशुल्क सेवा",
      customer_reviews: "ग्राहक समीक्षाएं",
      no_reviews: "अभी तक कोई समीक्षा नहीं। इस स्टोर की समीक्षा करने वाले पहले व्यक्ति बनें!"
    },
    
    // Comments & Reviews
    comments: {
      add_comment: "अपनी समीक्षा जोड़ें",
      select_rating: "रेटिंग चुनें",
      excellent: "उत्कृष्ट",
      good: "अच्छा",
      average: "औसत",
      poor: "खराब",
      terrible: "बहुत खराब",
      your_comment: "आपकी टिप्पणी",
      comment_placeholder: "इस स्टोर के साथ अपना अनुभव साझा करें...",
      cancel: "रद्द करें",
      submit_comment: "टिप्पणी सबमिट करें",
      login_required: "टिप्पणी जोड़ने के लिए कृपया लॉगिन करें",
      comment_added: "टिप्पणी सफलतापूर्वक जोड़ी गई!",
      comment_deleted: "टिप्पणी सफलतापूर्वक हटाई गई!",
      delete_confirm: "क्या आप वाकई इस टिप्पणी को हटाना चाहते हैं?",
      fill_all_fields: "कृपया सभी फ़ील्ड भरें"
    },
    
    // Login Page
    login: {
      title: "कृषिलिंक में लॉगिन करें",
      subtitle: "कृषि संसाधनों से जुड़ने के लिए अपने खाते तक पहुंचें",
      email: "ईमेल पता",
      password: "पासवर्ड",
      login_button: "लॉगिन",
      forgot_password: "पासवर्ड भूल गए?",
      no_account: "कोई खाता नहीं है?",
      register_here: "यहाँ रजिस्टर करें",
      email_placeholder: "अपना ईमेल दर्ज करें",
      password_placeholder: "अपना पासवर्ड दर्ज करें"
    },
    
    // Register Page
    register: {
      title: "कृषिलिंक में शामिल हों",
      subtitle: "कृषि संसाधनों और स्टोर तक पहुंचने के लिए अपना खाता बनाएं",
      full_name: "पूरा नाम",
      email: "ईमेल पता",
      password: "पासवर्ड",
      confirm_password: "पासवर्ड की पुष्टि करें",
      register_button: "खाता बनाएं",
      have_account: "पहले से खाता है?",
      login_here: "यहाँ लॉगिन करें",
      name_placeholder: "अपना पूरा नाम दर्ज करें",
      email_placeholder: "अपना ईमेल दर्ज करें",
      password_placeholder: "एक पासवर्ड बनाएं",
      confirm_placeholder: "अपने पासवर्ड की पुष्टि करें"
    },
    
    // About Page
    about: {
      title: "कृषिलिंक के बारे में",
      subtitle: "महाराष्ट्र भर में किसानों को सशक्त बनाना",
      mission_title: "हमारा मिशन",
      mission_text: "एक व्यापक प्लेटफॉर्म प्रदान करके किसानों और कृषि संसाधनों के बीच की खाई को पाटना जो उन्हें विश्वसनीय स्टोर, सरकारी योजनाओं और आवश्यक कृषि उपकरणों से जोड़ता है।",
      vision_title: "हमारा दृष्टिकोण",
      vision_text: "महाराष्ट्र में एक डिजिटल रूप से सशक्त कृषि पारिस्थितिकी तंत्र बनाना जहां हर किसान को गुणवत्तापूर्ण संसाधनों और सरकारी सहायता तक आसान पहुंच हो।",
      features_title: "मुख्य विशेषताएं"
    },
    
    // Contact Page
    contact: {
      title: "संपर्क करें",
      subtitle: "हमारी टीम से संपर्क करें",
      get_in_touch: "संपर्क में रहें",
      contact_text: "कोई प्रश्न है या सहायता चाहिए? हम महाराष्ट्र भर के किसानों की मदद के लिए यहां हैं।",
      name: "आपका नाम",
      email: "ईमेल पता",
      subject: "विषय",
      message: "संदेश",
      send_message: "संदेश भेजें",
      contact_info: "संपर्क जानकारी",
      address: "पता",
      phone: "फोन",
      email_label: "ईमेल"
    },
    
    // Footer
    footer: {
      description: "महाराष्ट्र भर में किसानों को संसाधनों, विश्वसनीय स्टोर और सरकारी योजनाओं से जोड़ना।",
      quick_links: "त्वरित लिंक",
      rights_reserved: "सभी अधिकार सुरक्षित"
    },
    
    // Common
    common: {
      loading: "लोड हो रहा है...",
      error: "त्रुटि",
      success: "सफलता",
      warning: "चेतावनी",
      info: "जानकारी",
      close: "बंद करें",
      save: "सहेजें",
      edit: "संपादित करें",
      delete: "हटाएं",
      search: "खोजें",
      filter: "फ़िल्टर",
      sort: "सॉर्ट",
      next: "अगला",
      previous: "पिछला"
    }
  },
  
  mr: {
    // Navigation & Header
    nav: {
      home: "मुख्यपृष्ठ",
      about: "आमच्याबद्दल",
      store: "स्टोअर",
      contact: "संपर्क",
      language: "भाषा",
      login: "लॉगिन",
      register: "नोंदणी",
      logout: "लॉगआउट",
      welcome: "स्वागत"
    },
    
    // Homepage
    homepage: {
      hero_title: "शेतकऱ्यांना संसाधनांशी जोडणे",
      hero_subtitle: "विश्वसनीय कृषी दुकाने, सरकारी योजना आणि साधने तुमच्या हाताशी.",
      browse_stores: "स्टोअर पहा",
      about_title: "कृषीलिंकबद्दल",
      about_text: "कृषीलिंक महाराष्ट्रातील शेतकऱ्यांना विश्वसनीय कृषी दुकाने, सरकारी योजना आणि आवश्यक कृषी संसाधने मिळवण्यात मदत करते. आमचे व्यासपीठ शेतकऱ्यांना माहितीपूर्ण निर्णय घेण्यास आणि उत्पादकता वाढवण्यास सक्षम बनवते.",
      read_more: "अधिक वाचा",
      why_title: "कृषीलिंक का निवडावे?",
      trusted_stores: "विश्वसनीय दुकाने",
      trusted_stores_desc: "सर्व प्रकारच्या शेतीच्या गरजांसाठी दर्जेदार उत्पादने पुरवणाऱ्या तपासलेल्या कृषी दुकाना.",
      gov_schemes: "सरकारी योजना",
      gov_schemes_desc: "नवीनतम सरकारी कृषी योजना आणि अनुदान सहजतेने मिळवा.",
      farmer_support: "शेतकरी सहाय्य",
      farmer_support_desc: "शेतकऱ्यांची उत्पादकता आणि नफा वाढवण्यासाठी समर्पित सहाय्य आणि संसाधने.",
      services_title: "आमच्या सेवा",
      services_subtitle: "शेतकऱ्यांना यशस्वी होण्यासाठी आवश्यक असलेली सर्व गोष्ट जोडणे.",
      agro_stores: "कृषी दुकाने",
      agro_stores_desc: "बियाणे, साधने आणि उपकरणांसाठी जवळची तपासलेली दुकाने शोधा.",
      seeds_fertilizers: "बियाणे आणि खते",
      seeds_fertilizers_desc: "तुमच्या पिकांसाठी योग्य असलेली उच्च दर्जाची बियाणे आणि खते मिळवा.",
      equipment: "उपकरणे",
      equipment_desc: "आधुनिक शेती उपकरणे आणि तंत्रज्ञान उपाय.",
      consultation: "सल्लामसलत",
      consultation_desc: "चांगल्या शेती पद्धतींसाठी तज्ञ सल्ला आणि मार्गदर्शन."
    },
    
    // Store Page
    store: {
      title: "कृषी दुकान निर्देशिका",
      subtitle: "तुमच्या जवळची विश्वसनीय कृषी दुकाने आणि सरकारी योजना शोधा",
      filter_district: "जिल्ह्यानुसार फिल्टर करा",
      filter_type: "दुकान प्रकार",
      filter_resource: "संसाधने",
      search_placeholder: "नाव किंवा सेवांनुसार दुकाने शोधा...",
      clear_filters: "सर्व फिल्टर साफ करा",
      all_districts: "सर्व जिल्हे",
      all_types: "सर्व प्रकार",
      all_resources: "सर्व संसाधने",
      government: "सरकारी",
      private: "खाजगी",
      results_showing: "दाखवत आहे",
      results_of: "पैकी",
      results_stores: "दुकाने",
      no_results: "कोणतीही दुकाने आढळली नाहीत",
      no_results_desc: "तुमचे फिल्टर किंवा शोध शब्द समायोजित करण्याचा प्रयत्न करा",
      govt_store: "सरकारी दुकान",
      private_store: "खाजगी दुकान",
      verified: "तपासलेले",
      schemes_available: "योजना उपलब्ध",
      available_here: "येथे उपलब्ध:",
      and_more: "आणि {count} अधिक",
      no_ratings: "अद्याप कोणतेही रेटिंग नाही",
      view_details: "तपशील पहा",
      add_review: "पुनरावलोकन जोडा",
      rating: "रेटिंग",
      contact_info: "संपर्क माहिती",
      services_offered: "दिल्या जाणाऱ्या सेवा",
      schemes_title: "उपलब्ध सरकारी योजना",
      subsidy: "अनुदान",
      free_service: "मोफत सेवा",
      customer_reviews: "ग्राहक पुनरावलोकने",
      no_reviews: "अद्याप कोणतेही पुनरावलोकन नाही. या दुकानाचे पुनरावलोकन करणारे पहिले व्यक्ती व्हा!"
    },
    
    // Comments & Reviews
    comments: {
      add_comment: "तुमचे पुनरावलोकन जोडा",
      select_rating: "रेटिंग निवडा",
      excellent: "उत्कृष्ट",
      good: "चांगले",
      average: "सरासरी",
      poor: "खराब",
      terrible: "अत्यंत खराब",
      your_comment: "तुमची टिप्पणी",
      comment_placeholder: "या दुकानासोबतचा तुमचा अनुभव शेअर करा...",
      cancel: "रद्द करा",
      submit_comment: "टिप्पणी सबमिट करा",
      login_required: "टिप्पणी जोडण्यासाठी कृपया लॉगिन करा",
      comment_added: "टिप्पणी यशस्वीरीत्या जोडली गेली!",
      comment_deleted: "टिप्पणी यशस्वीरीत्या हटवली गेली!",
      delete_confirm: "तुम्हाला खरोखर ही टिप्पणी हटवायची आहे का?",
      fill_all_fields: "कृपया सर्व फील्ड भरा"
    },
    
    // Login Page
    login: {
      title: "कृषीलिंकमध्ये लॉगिन करा",
      subtitle: "कृषी संसाधनांशी जोडण्यासाठी तुमच्या खात्यात प्रवेश करा",
      email: "ईमेल पत्ता",
      password: "पासवर्ड",
      login_button: "लॉगिन",
      forgot_password: "पासवर्ड विसरलात?",
      no_account: "खाते नाही?",
      register_here: "येथे नोंदणी करा",
      email_placeholder: "तुमचा ईमेल टाका",
      password_placeholder: "तुमचा पासवर्ड टाका"
    },
    
    // Register Page
    register: {
      title: "कृषीलिंकमध्ये सामील व्हा",
      subtitle: "कृषी संसाधने आणि दुकानांमध्ये प्रवेश मिळवण्यासाठी तुमचे खाते तयार करा",
      full_name: "पूर्ण नाव",
      email: "ईमेल पत्ता",
      password: "पासवर्ड",
      confirm_password: "पासवर्डची पुष्टी करा",
      register_button: "खाते तयार करा",
      have_account: "आधीपासून खाते आहे?",
      login_here: "येथे लॉगिन करा",
      name_placeholder: "तुमचे पूर्ण नाव टाका",
      email_placeholder: "तुमचा ईमेल टाका",
      password_placeholder: "एक पासवर्ड तयार करा",
      confirm_placeholder: "तुमच्या पासवर्डची पुष्टी करा"
    },
    
    // About Page
    about: {
      title: "कृषीलिंकबद्दल",
      subtitle: "संपूर्ण महाराष्ट्रातील शेतकऱ्यांना सक्षम बनवणे",
      mission_title: "आमचे ध्येय",
      mission_text: "शेतकरी आणि कृषी संसाधनांमधील अंतर कमी करणे एक व्यापक व्यासपीठ प्रदान करून जे त्यांना विश्वसनीय दुकाने, सरकारी योजना आणि आवश्यक शेती साधनांशी जोडते.",
      vision_title: "आमची दृष्टी",
      vision_text: "महाराष्ट्रात एक डिजिटली सक्षम कृषी परिसंस्था निर्माण करणे जिथे प्रत्येक शेतकऱ्याला दर्जेदार संसाधने आणि सरकारी सहाय्य सहजपणे मिळू शकेल.",
      features_title: "मुख्य वैशिष्ट्ये"
    },
    
    // Contact Page
    contact: {
      title: "संपर्क साधा",
      subtitle: "आमच्या टीमशी संपर्क साधा",
      get_in_touch: "संपर्कात रहा",
      contact_text: "प्रश्न आहेत किंवा मदत हवी आहे? आम्ही महाराष्ट्रभरातील शेतकऱ्यांना मदत करण्यासाठी येथे आहोत.",
      name: "तुमचे नाव",
      email: "ईमेल पत्ता",
      subject: "विषय",
      message: "संदेश",
      send_message: "संदेश पाठवा",
      contact_info: "संपर्क माहिती",
      address: "पत्ता",
      phone: "फोन",
      email_label: "ईमेल"
    },
    
    // Footer
    footer: {
      description: "संपूर्ण महाराष्ट्रातील शेतकऱ्यांना संसाधने, विश्वसनीय दुकाने आणि सरकारी योजनांशी जोडणे.",
      quick_links: "त्वरित दुवे",
      rights_reserved: "सर्व हक्क राखीव"
    },
    
    // Common
    common: {
      loading: "लोड होत आहे...",
      error: "त्रुटी",
      success: "यश",
      warning: "चेतावणी",
      info: "माहिती",
      close: "बंद करा",
      save: "जतन करा",
      edit: "संपादित करा",
      delete: "हटवा",
      search: "शोधा",
      filter: "फिल्टर",
      sort: "क्रमवारी",
      next: "पुढे",
      previous: "मागे"
    }
  }
};

// Language Manager Class
class LanguageManager {
  constructor() {
    this.currentLang = localStorage.getItem('krushilink_language') || 'en';
    this.translations = translations;
    this.init();
  }

  init() {
    // Set initial language
    this.setLanguage(this.currentLang);
  }

  setLanguage(lang) {
    if (!this.translations[lang]) {
      console.warn(`Language ${lang} not supported, falling back to English`);
      lang = 'en';
    }
    
    this.currentLang = lang;
    localStorage.setItem('krushilink_language', lang);
    
    // Update page content
    this.updatePageContent();
    
    // Update dropdown selection
    this.updateDropdownSelection();
    
    // Dispatch event for components that need to refresh
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
  }

  getCurrentLanguage() {
    return this.currentLang;
  }

  translate(key, params = {}) {
    const keys = key.split('.');
    let value = this.translations[this.currentLang];
    
    for (const k of keys) {
      if (value && typeof value === 'object') {
        value = value[k];
      } else {
        break;
      }
    }
    
    if (typeof value === 'string') {
      // Replace parameters in translation
      return value.replace(/\{(\w+)\}/g, (match, param) => {
        return params[param] || match;
      });
    }
    
    // Fallback to English if translation not found
    let fallback = this.translations.en;
    for (const k of keys) {
      if (fallback && typeof fallback === 'object') {
        fallback = fallback[k];
      } else {
        break;
      }
    }
    
    return typeof fallback === 'string' ? fallback : key;
  }

  updatePageContent() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
      const key = element.getAttribute('data-i18n');
      const translation = this.translate(key);
      
      // Check if it's a placeholder, value, or text content
      if (element.hasAttribute('placeholder')) {
        element.placeholder = translation;
      } else if (element.tagName === 'INPUT' && element.type !== 'button' && element.type !== 'submit') {
        if (element.hasAttribute('value')) {
          element.value = translation;
        }
      } else {
        element.textContent = translation;
      }
    });

    // Update elements with data-i18n-html for HTML content
    document.querySelectorAll('[data-i18n-html]').forEach(element => {
      const key = element.getAttribute('data-i18n-html');
      const translation = this.translate(key);
      element.innerHTML = translation;
    });
  }

  updateDropdownSelection() {
    // Update language dropdown if present
    const languageLinks = document.querySelectorAll('.language-link');
    languageLinks.forEach(link => {
      const lang = link.getAttribute('data-lang');
      if (lang === this.currentLang) {
        // Update dropdown text
        const dropdown = document.getElementById('languageDropdown');
        if (dropdown) {
          const langNames = {
            'en': 'English',
            'hi': 'हिन्दी',
            'mr': 'मराठी'
          };
          dropdown.textContent = langNames[lang] || 'Language';
        }
      }
    });
  }
}

// Initialize language manager
const languageManager = new LanguageManager();

// Make it globally available
window.languageManager = languageManager;

// Export for module usage
export default languageManager;